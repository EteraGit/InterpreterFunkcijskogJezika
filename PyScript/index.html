<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interpreter</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="pyscript.css" />
    <script defer src="pyscript.js"></script>

    <style>
        /* CSS styles for the textarea */
        textarea {
            font-family: 'Cascadia Code', monospace;
            font-size: 14px;
            font-weight: normal;
        }
    </style>
</head>
<body>
    <textarea id="test-input" rows="20" cols="100">
add(x,0):=x
add(x,Sc(y)):=Sc(add(x,y))

pd(0):=0
pd(Sc(y)):=y

sub(x,0):=x
sub(x,Sc(y)):=pd(sub(x,y))

mul(x,0):=0
mul(x,Sc(y)):=add(x,mul(x,y))

doubleSub(x,0):=x
doubleSub(x,Sc(y)):=pd(pd(doubleSub(x,y)))

[x+0]:=x
[x+Sc(y)]:=Sc([x+y])

[x--y]:=sub(x,y)

[x*0]:=0
[x*Sc(y)]:=[x+[x*y]]

f(x,y):=add(Sc(Sc(x)),y)

g(x,y):=add(sub(x,y), y)

h(x,y,z):=mul(Sc(z), sub(x,y))

factorial(0):=1
factorial(Sc(n)):=mul(Sc(n),factorial(n))

Positive(0):=0
Positive(Sc(x)):=1

Greater(x,y):<=>Positive(sub(x,y))

div(x,y):=pd((mu z <= x)Greater(mul(z,y),x))

mod(x,y):=sub(x,mul(y,div(x,y)))   // (x-(y*(x//y)))

Equal(x,y):<=>!Greater(x,y) && !Greater(y,x)

Divides(x,y):<=>Equal(mod(y,x),Z(x))  // moze i Equal(mod(x,y),0)

Prime(p):<=>Equal((#d<=p)Divides(d,p), 2)

nextprime(p):=(mu q <= mul(p,2))(Prime(q) && Greater(q,p))  // eventualno AND(...)

CustomRelation(x,y):<=> !Greater(y,x) && Divides(y,x) || Equal(x,y)

RelationWithFunctions(x,y):<=> sub(x,y) && pd(y)

Zagrade0(x,y,z):<=> !(Greater(x,y) && Greater(y,z)) && (Greater(z,y) && Greater(y,x))

Zagrade1(x,y):<=> Divides(x,y) || (Greater(x,y) && !Equal(x,y)) && !(Prime(x) || Prime(y))

Zagrade2(x,y):<=> (!Prime(nextprime(x)) || nextprime(y)) && !Equal(x,y)

[(mu x <= 10) Greater(x,5) * 2] // 12

nextprime(11) // 13

[add(10, 5) * [3 -- 1]]  // 30

[10 + [[5 -- 2] * 7]]  // 31

nextprime([Greater(1,2) || Greater(2,1) + Prime(7)]) // 3

[Prime(2) + nextprime(10)]  // 12

Greater([factorial([2+2]) -- nextprime(2)], 2) // 1

[[add(10,[2+3]) * [0 -- 2]] + [[7 * nextprime(6)] -- 12]]  // 37
    </textarea>
    <button id="submit-button" type="submit" py-click="start()">Interpretiraj!</button>
    <div id="test-output"></div>
    <py-config>
        plugins = [
          "https://pyscript.net/latest/plugins/python/py_tutor.py"
        ]
        [[fetch]]
        files = ["./vepar.py", "./Token.py",  "./Parser.py", "./AST.py"]
    </py-config>

    <py-script>
        from vepar import *
        from AST import *
        from Token import *
        from Parser import *

        def start():
            ulaz = Element('test-input').element.value
            kôd = P(ulaz)
            kôd.izvrši()
    </py-script>
</body>
</html>